"use strict";var t=require("react"),e=require("prop-types");function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=n(t),a=n(e);function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?d(t):e}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=l(t);if(e){var a=l(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return c(this,n)}}var f="styles_Editext__button__6H8n_",p="styles_Editext__input__1534X",v="styles_Editext__main_container__2Y-IL",h="styles_Editext__editing_container__3yvUv",y="styles_Editext__view_container__2l2kB",b="styles_Editext__buttons_container__1kphL",g="styles_Editext__buttons_showButtonsOnHover__EUUD5",m="styles_Editext__buttons_before_aligned__NnoWq",x="styles_Editext__buttons_after_aligned__1nlcG",E="styles_Editext__validation_message__3B-OU",w="styles_Editext__cancel_button__259hb",C="styles_Editext__edit_button__hthOZ",O="styles_Editext__save_button__3WN6q",B="styles_Editext__hide_default_icons__AV_7m",N="styles_Editext__hint__2QU2S";function k(){return Array.apply(void 0,arguments).filter((function(t){return t})).join(" ")}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&o.firstChild?o.insertBefore(a,o.firstChild):o.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}}('.styles_Editext__button__6H8n_ {\n  border-radius: 1px;\n  outline: none;\n  padding: 0.6em;\n  min-width: 30px;\n  height: 100%;\n  border-color: rgb(216, 216, 216) rgb(209, 209, 209) rgb(186, 186, 186);\n  border-style: solid;\n  border-width: 1px;\n}\n\n.styles_Editext__button__6H8n_:hover {\n  cursor: pointer;\n  background-color: rgba(241, 241, 241, 1);\n}\n\n.styles_Editext__input__1534X {\n  width: 100%;\n  border: 1px solid rgb(212, 212, 212);\n  padding: 0.6em;\n  outline: none;\n}\n\n.styles_Editext__main_container__2Y-IL {\n  display: flex;\n  flex-direction: column;\n}\n\n.styles_Editext__editing_container__3yvUv {\n  display: flex;\n  flex: 1;\n  align-items: center;\n}\n\n.styles_Editext__view_container__2l2kB {\n  display: flex;\n  align-items: center;\n}\n\n.styles_Editext__buttons_container__1kphL {\n  display: flex;\n}\n\n.styles_Editext__buttons_showButtonsOnHover__EUUD5 .styles_Editext__buttons_container__1kphL {\n  visibility: hidden;\n}\n\n.styles_Editext__buttons_showButtonsOnHover__EUUD5:hover .styles_Editext__buttons_container__1kphL {\n  visibility: visible;\n}\n\n.styles_Editext__buttons_before_aligned__NnoWq {\n  margin-right: 5px;\n}\n\n.styles_Editext__buttons_after_aligned__1nlcG {\n  margin-left: 5px;\n}\n\n.styles_Editext__validation_message__3B-OU {\n  font-weight: 500;\n  color: crimson;\n  font-size: 0.7em;\n  margin-top: 3px;\n}\n\n.styles_Editext__cancel_button__259hb {\n  color: crimson;\n}\n\n.styles_Editext__cancel_button__259hb::before {\n  content: "\\2715";\n  margin: 3px;\n}\n\n.styles_Editext__edit_button__hthOZ {\n  color: #000;\n}\n\n.styles_Editext__edit_button__hthOZ::before {\n  content: "\\270E";\n  margin: 3px;\n}\n\n.styles_Editext__save_button__3WN6q {\n  color: darkgreen;\n  margin-right: 3px;\n}\n\n.styles_Editext__save_button__3WN6q::before {\n  content: "\\2713";\n  margin: 3px;\n}\n\n.styles_Editext__hide_default_icons__AV_7m::before {\n  content: none;\n  margin: 0;\n}\n\n.styles_Editext__hint__2QU2S {\n  font-weight: 500;\n  color: lightslategray;\n  font-size: 0.7em;\n  margin-top: 3px;\n  text-align: left;\n}\n');var P="view-container",D="edit-container",S="edit-button",V="save-button",U="cancel-button",F="input",I="hint",j=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(j,t.Component);var n,a,l,c=_(j);function j(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,j),s(d(e=c.call(this,t)),"handleKeyDown",(function(t){var n=e.props,o=n.submitOnEnter,a=n.inputProps,i=n.cancelOnEscape,s=[13,"Enter"].some((function(e){return t.keyCode===e||t.code===e})),r=[27,"Escape","Esc"].some((function(e){return t.keyCode===e||t.code===e}));s&&(o&&e.handleSave(),t.preventDefault()),r&&(i&&e.handleCancel(),t.preventDefault()),a.onKeyDown&&a.onKeyDown(t)})),s(d(e),"handleOnBlur",(function(t){var n=e.props,o=n.cancelOnUnfocus,a=n.submitOnUnfocus,i=n.inputProps,s=e.editingButtons.current.contains(t.relatedTarget);o&&!s&&e.handleCancel(),a&&!s&&!o&&e.handleSave(),i.onBlur&&i.onBlur(t)})),s(d(e),"handleViewFocus",(function(t){e.setState({viewFocused:!0});var n=e.props,o=n.startEditingOnFocus,a=n.viewProps;o&&e.setState({editing:!0}),a.onFocus&&a.onFocus(t)})),s(d(e),"handleKeyDownForView",(function(t){var n=[13,"Enter"].some((function(e){return t.keyCode===e||t.code===e})),o=e.props,a=o.startEditingOnEnter,i=o.viewProps,s=n&&e.state.viewFocused&&a;s&&t.preventDefault(),s&&e.setState({editing:!0}),i.onKeyDown&&i.onKeyDown(t)})),s(d(e),"handleInputChange",(function(t){e.setState({valid:!0,value:t.target.value})})),s(d(e),"handleCancel",(function(){var t;e.setState({valid:!0,editing:!1,value:null!==(t=e.state.savedValue)&&void 0!==t?t:e.props.value},(function(){return e.props.onCancel(e.state.value,e.props.inputProps)}))})),s(d(e),"handleActivateEditMode",(function(){e.setState({editing:!0},(function(){e.props.onEditingStart(e.state.value)}))})),s(d(e),"handleSave",(function(){var t=e.props,n=t.onSave,o=t.validation,a=t.onValidationFail,i=t.inputProps;if(!o(e.state.value))return e.setState({valid:!1},(function(){a&&a(e.state.value)}));e.setState({editing:!1,savedValue:e.state.value},(function(){return n(e.state.savedValue,i)}))})),s(d(e),"_renderEditingMode",(function(){var t=e.props,n=t.saveButtonClassName,a=t.saveButtonContent,i=t.cancelButtonClassName,s=t.editContainerClassName,r=t.viewContainerClassName,l=t.cancelButtonContent,u=t.onValidationFail,d=t.validationMessage,c=t.hint,_=t.hideIcons,p=t.buttonsAlign,v=e._renderInput(),y=k("".concat(f),"".concat(O),_&&"".concat(B)),g=n||y,C=k("".concat(f),"".concat(w),_&&"".concat(B)),P=i||C,S=h;s&&(S=s),r&&(S=r);var F=k(b,"before"===p&&"".concat(m),"after"===p&&"".concat(x));return o.default.createElement("div",null,o.default.createElement("div",{ref:e.editingContainer,className:S,editext:D},"after"===p&&v,o.default.createElement("div",{className:F,ref:e.editingButtons},o.default.createElement("button",{ref:e.saveButton,editext:V,type:"button",className:g,onClick:e.handleSave},a),o.default.createElement("button",{type:"button",editext:U,className:P,onClick:e.handleCancel},l)),"before"===p&&v),!e.state.valid&&!u&&o.default.createElement("div",{className:E},d),c&&o.default.createElement("div",{className:N,editext:I},c))})),s(d(e),"_renderViewMode",(function(){var t=e.props,n=t.viewProps,a=t.editButtonClassName,i=t.editButtonContent,s=t.viewContainerClassName,l=t.hideIcons,u=t.buttonsAlign,d=t.editOnViewClick,c=t.showButtonsOnHover,_=t.renderValue,p=k("".concat(f),"".concat(C),l&&"".concat(B)),v=a||p,h=k(s||y,c&&"".concat(g)),E=k(b,"before"===u&&"".concat(m),"after"===u&&"".concat(x)),w=d?e.handleActivateEditMode:void 0,O="function"==typeof _?_(e.state.value):e.state.value;return o.default.createElement("div",{className:h,editext:P},"after"===u&&o.default.createElement("div",r({tabIndex:e.props.tabIndex},n,{onKeyDown:e.handleKeyDownForView,onFocus:e.handleViewFocus,onClick:w,editext:"view"}),O),o.default.createElement("div",{className:E},o.default.createElement("button",{type:"button",editext:S,className:v,onClick:e.handleActivateEditMode},i)),"before"===u&&o.default.createElement("div",r({tabIndex:e.props.tabIndex},n,{onKeyDown:e.handleKeyDownForView,onFocus:e.handleViewFocus,onClick:w,editext:P}),O))})),e.state={editing:t.editing,valid:!0,value:t.value||"",savedValue:void 0,viewFocused:!1},e.saveButton=o.default.createRef(),e.input=o.default.createRef(),e.editingContainer=o.default.createRef(),e.editingButtons=o.default.createRef(),e}return n=j,(a=[{key:"componentDidMount",value:function(){this.checkPropsConsistency()}},{key:"checkPropsConsistency",value:function(){this.props.cancelOnUnfocus&&this.props.submitOnUnfocus&&console.warn("EdiText: Both `cancelOnUnfocus` and `submitOnUnfocus` are set to true. `submitOnUnfocus` is ignored in this case. Please remove one of these.")}},{key:"componentDidUpdate",value:function(t,e){var n={};void 0!==this.props.value&&t.value!==this.props.value&&(n.value=this.props.value,n.savedValue=this.props.value),void 0!==t.editing&&t.editing!==this.props.editing&&(n.editing=this.props.editing),Object.keys(n).length>0&&this.setState(n)}},{key:"_renderInput",value:function(){return"textarea"===this.props.type?o.default.createElement("textarea",r({ref:this.input,className:p,editext:F,tabIndex:this.props.tabIndex},this.props.inputProps,{onBlur:this.handleOnBlur,value:this.state.value,onChange:this.handleInputChange,autoFocus:this.state.editing})):o.default.createElement("input",r({ref:this.input,className:p,editext:F,tabIndex:this.props.tabIndex},this.props.inputProps,{onKeyDown:this.handleKeyDown,onBlur:this.handleOnBlur,value:this.state.value,type:this.props.type,onChange:this.handleInputChange,autoFocus:this.state.editing}))}},{key:"render",value:function(){var t=this.state.editing?this._renderEditingMode():this._renderViewMode(),e=this.props,n=e.mainContainerClassName,a=e.className,i=k(n||v,a);return o.default.createElement("div",{className:i},t)}}])&&i(n.prototype,a),l&&i(n,l),j}();j.defaultProps={value:"",type:"text",validationMessage:"Invalid Value",validation:function(t){return!0},onEditingStart:function(t){return null},onCancel:function(t){return null},inputProps:{onKeyDown:function(t){},onBlur:function(t){}},viewProps:{onKeyDown:function(t){},onFocus:function(t){}},cancelButtonContent:"",saveButtonContent:"",editButtonContent:"",hideIcons:!1,buttonsAlign:"after",editing:!1},j.propTypes={inputProps:a.default.object,viewProps:a.default.object,value:a.default.string.isRequired,hint:a.default.node,validationMessage:a.default.node,validation:a.default.func,onValidationFail:a.default.func,type:a.default.oneOf(["text","textarea","password","email","number","date","datetime-local","time","month","url","week","tel"]).isRequired,onCancel:a.default.func,onSave:a.default.func.isRequired,onEditingStart:a.default.func,className:a.default.string,saveButtonClassName:a.default.string,editButtonClassName:a.default.string,cancelButtonClassName:a.default.string,mainContainerClassName:a.default.string,editContainerClassName:a.default.string,viewContainerClassName:a.default.string,cancelButtonContent:a.default.any,saveButtonContent:a.default.any,editButtonContent:a.default.any,hideIcons:a.default.bool,buttonsAlign:a.default.oneOf(["after","before"]),editOnViewClick:a.default.bool,editing:a.default.bool,showButtonsOnHover:a.default.bool,submitOnEnter:a.default.bool,cancelOnEscape:a.default.bool,cancelOnUnfocus:a.default.bool,submitOnUnfocus:a.default.bool,tabIndex:a.default.any,startEditingOnFocus:a.default.bool,startEditingOnEnter:a.default.bool,renderValue:a.default.func},module.exports=j;
//# sourceMappingURL=index.min.js.map
